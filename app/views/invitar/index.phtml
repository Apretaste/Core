<?php $wwwhttp = $this->di->get('path')['http']; ?>

<!DOCTYPE html>
<html lang="en">
<head>
<title><?php echo $title; ?>| Apretaste</title>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Devoted activists working to connect thousands of Cubans to the Internet each month via accessible, effective and legal ways">
<meta name="author" content="Salvi Pascual">

<!-- Twitter Card data -->
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@apretaste">
<meta name="twitter:title" content="We are connecting Cubans to the Web">
<meta name="twitter:description" content="Connecting thousands of Cubans to the Internet each month via accessible, effective and legal ways">
<meta name="twitter:creator" content="@apretaste">
<meta name="twitter:image" content="<?php echo $wwwhttp; ?>/images/background.jpg">

<!-- Open Graph data -->
<meta name="fb:app_id" content="285099284865702" />
<meta name="og:url" content="https://apretaste.com" />
<meta name="og:type" content="website" />
<meta name="og:locale" content="en_US" />
<meta name="og:locale:alternate" content="es_ES" />
<meta name="og:site_name" content="Apretaste" />
<meta name="og:title" content="We are connecting Cubans to the Web" />
<meta name="og:description" content="Connecting thousands of Cubans to the Internet each month via accessible, effective and legal ways" />
<meta name="og:image" content="<?php echo $wwwhttp; ?>/images/background.jpg" />

<link rel="icon" href="<?php echo $wwwhttp; ?>/images/apretaste.icon.png">
<link rel="canonical" href="https://apretaste.com/welcome/aboutus">

<!-- Bootstrap Core CSS -->
<link href="<?php echo $wwwhttp; ?>/css/bootstrap.min.css" rel="stylesheet">

<!-- Custom CSS -->
<link href="<?php echo $wwwhttp; ?>/css/welcome.css" rel="stylesheet">

<script src="js/jquery.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/validator.min.js"></script>

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
			<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
		<![endif]-->
		
<!-- Custom Fonts -->
	<link href="<?php echo $wwwhttp; ?>/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
	<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">

</head>

<body>
	<nav class="navbar navbar-inverse" style="border-radius: 0px; -webkit-border-radius: 0px; -moz-border-radius: 0px;">
		<div class="container">
			<div class="navbar-header">
				<span class="navbar-brand" style="text-transform: uppercase;"><?php if(isset($title)) echo $title; ?></span>
			</div>
			<div class="navbar-right">
				<a href="/welcome" class="btn btn-default navbar-btn">Go Back</a>
			</div>
		</div>
	</nav>
	<div class="container">
		<section id="form-section">
			<div class="panel panel-default " style="max-width: 500px; margin: 0 auto;;">
			<div class="panel-heading">
			<h1 class="panel-title"><span class="glyphicon glyphicon-send"></span> Fill this form for invite your friends to use Apretaste!
			</h1></div>
			
				<div class="panel-body" style="text-align: left;">
					<?php if ($message !== false): ?>
					<div class="alert alert-<?php echo $message_type;?>" role="alert"><?php echo $message;?></div>
					<?php endif;?>
	
					<!-- The Form -->

					<form action="invitar" method="POST" data-toggle="validator" role="form">

						<div class="form-group">
							<label class="control-label" for="name">Your name:</label>
							<input required id="name" class="form-control" type="text" name="name" placeholder="type your name here..." value="<?php echo $name;?>">
						</div>
						<div class="form-group">
							<label class="control-label" for="email">Your email:</label>
							<input required id="email" class="form-control" type="email" name="email" placeholder="type your email address here..." data-error="Bruh, that email address is invalid" value="<?php echo $email;?>">
						</div>
						<div class="form-group">
							<label class="control-label">Friend's email:</label>
							<br /> <small>Los emails que debe introducir a continuaci&oacute;n ser&aacute;n invitados a usar Apretaste.</small><br />
							<input type="hidden" value="<?php echo count($guest); ?>" id="totalGuests">
							<ul class="list-group" id="invitationForm">
						<?php foreach ($guest as $i => $g): ?>
						<li class="list-group-item" id="guest<?php echo $i;?>" style="padding: 0px;">
							<?php if ($i >0): ?>
								<div class="input-group">
										<input required class="form-control" type="email" name="guest[<?php echo $i;?>]" placeholder="type the email of your friend here.." data-error="Bruh, that email address is invalid" value="<?php if ($message_code > 0) echo $g;?>" style="box-shadow: none; border: 0px;">
										<span class="input-group-btn">
											<button id="btnGuestRemove<?php echo $i;?>" class="btn btn-default btn-remove" type="button" style="border: 0px;" onclick="$('#guest<?php echo $i;?>').remove();">
												<span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
											</button>
										</span>
									</div>
							<?php else: ?>
									<input required class="form-control" type="email" name="guest[<?php echo $i;?>]" placeholder="type the email of your friend here.." data-error="Bruh, that email address is invalid" value="<?php if ($message_code > 0) echo $g;?>" style="box-shadow: none; border: 0px;">
							<?php endif;?>
						</li>
						<?php endforeach;?>
					</ul>
							<a class="btn btn-default" onclick="inviteOther();">Invite other</a>
						</div>

						<div class="form-group <?php if ($message_code === 1) echo 'alert alert-danger'; ?>">
							<label>Type the text in the image:</label>
							<br />
							<img style="margin: 5px;" src="invitar/captcha">
							<br />
							<input required class="form-control" type="text" name="captcha">
						</div>


						<input class="btn btn-success" type="submit" value="Send invitation">
					</form>

					<!-- template -->
					<ul style="display: none;">
						<li class="list-group-item" id="guestTpl" style="padding: 0px;">
							<div class="input-group">
								<input required class="form-control" type="email" name="guest" placeholder="type the email of your friend here.." data-error="Bruh, that email address is invalid" value="" style="box-shadow: none; border: 0px;">
								<span class="input-group-btn" id>
									<button id="btnGuestRemove" class="btn btn-default btn-remove" type="button" style="border: 0px;" onclick="$('#guestTpl').remove();">
										<span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
									</button>
								</span>
							</div>
						</li>
					</ul>

				</div>
			</div>
		</section>
	</div>
	<script>
		function inviteOther(){
			var total = $("#totalGuests").val() * 1;
			
			var g = $("#guestTpl").clone();
			var id = "#guest" + total;
			g.attr('id', 'guest' + total);
			$("#invitationForm").append(g);			
			$(id + ' input').attr('name', 'guest[' + total + ']');
			$(id + ' input').attr('value', '');
			$(id + ' .btn-remove').attr('onclick', "$('#guest" + total + "').remove();");
			total++;
			$("#totalGuests").val(total);
			
		}

		$(function(){
			$("#btnGuestRemove0").hide();
		});
		
	</script>
</body>
</html>